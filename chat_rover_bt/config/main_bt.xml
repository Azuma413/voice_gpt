<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="MainBT">
    <KeepRunningUntilFailure>
      <Sequence>
        <VOSK out_voice="{voice}"/>
        <IfThenElse>
          <GPT1 in_voice="{voice}"
                out_text="{text}"/>
          <RetryUntilSuccessful num_attempts="">
            <Sequence>
              <YOLO out_object="{object_pos}"/>
              <GPT2 in_text="{text}"
                    out_command="{command}"
                    in_object="{object_pos}"/>
              <SendPos in_command="{command}"/>
            </Sequence>
          </RetryUntilSuccessful>
          <AlwaysFailure/>
        </IfThenElse>
      </Sequence>
    </KeepRunningUntilFailure>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="GPT1"
            editable="true">
      <input_port name="in_voice"/>
      <output_port name="out_text"/>
    </Action>
    <Action ID="GPT2"
            editable="true">
      <input_port name="in_text"/>
      <output_port name="out_command"/>
      <input_port name="in_object"/>
    </Action>
    <Action ID="SendPos"
            editable="true">
      <input_port name="in_command"/>
    </Action>
    <Action ID="VOSK"
            editable="true">
      <output_port name="out_voice"/>
    </Action>
    <Action ID="YOLO"
            editable="true">
      <output_port name="out_object"/>
    </Action>
  </TreeNodesModel>

</root>
